<!Doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>homework</title>
    <script>
      let q1_answer, q2_answer, q3_answer, q4_answer;

      let leftTime = 10;
      let timeID;

      function checkLeftTime() {
        let html_leftTime = document.getElementById("leftTime");

        leftTime--;

        html_leftTime.innerHTML = leftTime;

        if (leftTime === 0) {
          clearInterval(timeID);
          leftTime = 10;
          html_leftTime.innerHTML = leftTime;
        }
      }

      function buildQuestion() {

        let sign = ["+", "-", "/", "*"];
        let sign_num = [];
        let num = [];

        for (let i = 0; i < 4; i++) {
          sign_num[i] = Math.floor(Math.random() * 4);
        }

        for (let i = 0; i < 8; i++) {
          num[i] = Math.floor(Math.random() * 20 + 1);
        }

        // 랜덤 문제 4개 제작
        let q1 = num[0] + sign[sign_num[0]] + num[1];
        let q2 = num[2] + sign[sign_num[1]] + num[3];
        let q3 = num[4] + sign[sign_num[2]] + num[5];
        let q4 = num[6] + sign[sign_num[3]] + num[7];

        // 문제 출력

        let html_q1 = document.getElementById("q1");
        let html_q2 = document.getElementById("q2");
        let html_q3 = document.getElementById("q3");
        let html_q4 = document.getElementById("q4");

        html_q1.innerText = q1;
        html_q1.style.textDecoration = "none";
        html_q2.innerText = q2;
        html_q2.style.textDecoration = "none";
        html_q3.innerText = q3;
        html_q3.style.textDecoration = "none";
        html_q4.innerText = q4;
        html_q4.style.textDecoration = "none";

        timeID = setInterval(checkLeftTime, 1000);

        // 정답 얻기
        if (sign_num[0] === 0)
          q1_answer = num[0] + num[1];
        else if (sign_num[0] === 1)
          q1_answer = num[0] - num[1];
        else if (sign_num[0] === 2)
          q1_answer = parseInt(num[0] / num[1]);
        else if (sign_num[0] === 3)
          q1_answer = num[0] * num[1];

        if (sign_num[1] === 0)
          q2_answer = num[2] + num[3];
        else if (sign_num[1] === 1)
          q2_answer = num[2] - num[3];
        else if (sign_num[1] === 2)
          q2_answer = parseInt(num[2] / num[3]);
        else if (sign_num[1] === 3)
          q2_answer = num[2] * num[3];

        if (sign_num[2] === 0)
          q3_answer = num[4] + num[5];
        else if (sign_num[2] === 1)
          q3_answer = num[4] - num[5];
        else if (sign_num[2] === 2)
          q3_answer = parseInt(num[4] / num[5]);
        else if (sign_num[2] === 3)
          q3_answer = num[4] * num[5];

        if (sign_num[3] === 0)
          q4_answer = num[6] + num[7];
        else if (sign_num[3] === 1)
          q4_answer = num[6] - num[7];
        else if (sign_num[3] === 2)
          q4_answer = parseInt(num[6] / num[7]);
        else if (sign_num[3] === 3)
          q4_answer = num[6] * num[7];



        setTimeout("checkAnswer()", 10000);
      }

      function checkAnswer() {
        let answer_count = 0;

        let html_q1 = document.getElementById("q1");
        let html_q2 = document.getElementById("q2");
        let html_q3 = document.getElementById("q3");
        let html_q4 = document.getElementById("q4");

        let html_q1_answer = parseInt(document.getElementById("q1_answer").value);
        let html_q2_answer = parseInt(document.getElementById("q2_answer").value);
        let html_q3_answer = parseInt(document.getElementById("q3_answer").value);
        let html_q4_answer = parseInt(document.getElementById("q4_answer").value);

        if (html_q1_answer !== q1_answer) {
          html_q1.style.textDecoration = "line-through";
        } else {
          answer_count++;
        }

        if (html_q2_answer !== q2_answer) {
          html_q2.style.textDecoration = "line-through";
        } else {
          answer_count++;
        }

        if (html_q3_answer !== q3_answer) {
          html_q3.style.textDecoration = "line-through";
        } else {
          answer_count++;
        }

        if (html_q4_answer !== q4_answer) {
          html_q4.style.textDecoration = "line-through";
        } else {
          answer_count++;
        }

        let html_answer_count = document.getElementById("answer_count");
        html_answer_count.innerHTML = answer_count;

      }
    </script>
</head>
<body onload="buildQuestion()">
<h3>산수 문제를 풀어봅시다.</h3>
<p>문제는 자동으로 생성되며, 10초가 지나면 자동 채점됩니다.</p>
<p>소수점 아래는 무시합니다.</p>
<p>남은 시간 <span id="leftTime">10</span></p>
<hr>
<table>
    <tbody>
    <tr>
        <td id="q1"></td>
        <td><input type="text" id="q1_answer"></td>
    </tr>
    <tr>
        <td id="q2"></td>
        <td><input type="text" id="q2_answer"></td>
    </tr>
    <tr>
        <td id="q3"></td>
        <td><input type="text" id="q3_answer"></td>
    </tr>
    <tr>
        <td id="q4"></td>
        <td><input type="text" id="q4_answer"></td>
    </tr>
    </tbody>
    <tfoot>
    <td>
        <button onclick="buildQuestion()"> 다시</button>
    </td>
    <td id="answer_count">0</td>
    </tfoot>
</table>

</body>
</html>